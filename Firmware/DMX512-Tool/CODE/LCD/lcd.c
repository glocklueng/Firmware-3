/****************************************************                                                                                         
* Microcontroller: STM32F103RBT6
* Handware: JRMD1-V1.0
* File: lcd.c                              
* Revision: 1.0  
* Description: LCD12864 API
* Author: ValarHao
* Date：2015.12.24
****************************************************/
#include "lcd.h"
#include "spi.h"
#include "gui.h"

OS_STK LCD_TASK_STK[LCD_STK_SIZE];

//OS_EVENT *os_sem_lcd;

u8 lcd_buff[128][8];

const u8 ascii_table_8x16[95][16] = {
	/*-- 文字:   --*/
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*-- 文字: ! --*/
	0x00,0x00,0x00,0xF8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x33,0x30,0x00,0x00,0x00,
	/*-- 文字: " --*/
	0x00,0x10,0x0C,0x06,0x10,0x0C,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*-- 文字: # --*/
	0x40,0xC0,0x78,0x40,0xC0,0x78,0x40,0x00,0x04,0x3F,0x04,0x04,0x3F,0x04,0x04,0x00,
	/*-- 文字: $ --*/
	0x00,0x70,0x88,0xFC,0x08,0x30,0x00,0x00,0x00,0x18,0x20,0xFF,0x21,0x1E,0x00,0x00,
	/*-- 文字: % --*/
	0xF0,0x08,0xF0,0x00,0xE0,0x18,0x00,0x00,0x00,0x21,0x1C,0x03,0x1E,0x21,0x1E,0x00,
	/*-- 文字: & --*/
	0x00,0xF0,0x08,0x88,0x70,0x00,0x00,0x00,0x1E,0x21,0x23,0x24,0x19,0x27,0x21,0x10,
	/*-- 文字: ' --*/
	0x10,0x16,0x0E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*-- 文字: ( --*/
	0x00,0x00,0x00,0xE0,0x18,0x04,0x02,0x00,0x00,0x00,0x00,0x07,0x18,0x20,0x40,0x00,
	/*-- 文字: ) --*/
	0x00,0x02,0x04,0x18,0xE0,0x00,0x00,0x00,0x00,0x40,0x20,0x18,0x07,0x00,0x00,0x00,
	/*-- 文字: * --*/
	0x40,0x40,0x80,0xF0,0x80,0x40,0x40,0x00,0x02,0x02,0x01,0x0F,0x01,0x02,0x02,0x00,
	/*-- 文字: + --*/
	0x00,0x00,0x00,0xF0,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x1F,0x01,0x01,0x01,0x00,
	/*-- 文字: , --*/
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xB0,0x70,0x00,0x00,0x00,0x00,0x00,
	/*-- 文字: - --*/
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x01,
	/*-- 文字: . --*/
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,0x00,0x00,
	/*-- 文字: / --*/
	0x00,0x00,0x00,0x00,0x80,0x60,0x18,0x04,0x00,0x60,0x18,0x06,0x01,0x00,0x00,0x00,
	/*-- 文字: 0 --*/
	0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x0F,0x10,0x20,0x20,0x10,0x0F,0x00,
	/*-- 文字: 1 --*/
	0x00,0x10,0x10,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
	/*-- 文字: 2 --*/
	0x00,0x70,0x08,0x08,0x08,0x88,0x70,0x00,0x00,0x30,0x28,0x24,0x22,0x21,0x30,0x00,
	/*-- 文字: 3 --*/
	0x00,0x30,0x08,0x88,0x88,0x48,0x30,0x00,0x00,0x18,0x20,0x20,0x20,0x11,0x0E,0x00,
	/*-- 文字: 4 --*/
	0x00,0x00,0xC0,0x20,0x10,0xF8,0x00,0x00,0x00,0x07,0x04,0x24,0x24,0x3F,0x24,0x00,
	/*-- 文字: 5 --*/
	0x00,0xF8,0x08,0x88,0x88,0x08,0x08,0x00,0x00,0x19,0x21,0x20,0x20,0x11,0x0E,0x00,
	/*-- 文字: 6 --*/
	0x00,0xE0,0x10,0x88,0x88,0x18,0x00,0x00,0x00,0x0F,0x11,0x20,0x20,0x11,0x0E,0x00,
	/*-- 文字: 7 --*/
	0x00,0x38,0x08,0x08,0xC8,0x38,0x08,0x00,0x00,0x00,0x00,0x3F,0x00,0x00,0x00,0x00,
	/*-- 文字: 8 --*/
	0x00,0x70,0x88,0x08,0x08,0x88,0x70,0x00,0x00,0x1C,0x22,0x21,0x21,0x22,0x1C,0x00,
	/*-- 文字: 9 --*/
	0x00,0xE0,0x10,0x08,0x08,0x10,0xE0,0x00,0x00,0x00,0x31,0x22,0x22,0x11,0x0F,0x00,
	/*-- 文字: : --*/
	0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x00,
	/*-- 文字: ; --*/
	0x00,0x00,0x00,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x60,0x00,0x00,0x00,0x00,
	/*-- 文字: < --*/
	0x00,0x00,0x80,0x40,0x20,0x10,0x08,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x20,0x00,
	/*-- 文字: = --*/
	0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x00,0x04,0x04,0x04,0x04,0x04,0x04,0x04,0x00,
	/*-- 文字: > --*/
	0x00,0x08,0x10,0x20,0x40,0x80,0x00,0x00,0x00,0x20,0x10,0x08,0x04,0x02,0x01,0x00,
	/*-- 文字: ? --*/
	0x00,0x70,0x48,0x08,0x08,0x08,0xF0,0x00,0x00,0x00,0x00,0x30,0x36,0x01,0x00,0x00,
	/*-- 文字: @ --*/
	0xC0,0x30,0xC8,0x28,0xE8,0x10,0xE0,0x00,0x07,0x18,0x27,0x24,0x23,0x14,0x0B,0x00,
	/*-- 文字: A --*/
	0x00,0x00,0xC0,0x38,0xE0,0x00,0x00,0x00,0x20,0x3C,0x23,0x02,0x02,0x27,0x38,0x20,
	/*-- 文字: B --*/
	0x08,0xF8,0x88,0x88,0x88,0x70,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x11,0x0E,0x00,
	/*-- 文字: C --*/
	0xC0,0x30,0x08,0x08,0x08,0x08,0x38,0x00,0x07,0x18,0x20,0x20,0x20,0x10,0x08,0x00,
	/*-- 文字: D --*/
	0x08,0xF8,0x08,0x08,0x08,0x10,0xE0,0x00,0x20,0x3F,0x20,0x20,0x20,0x10,0x0F,0x00,
	/*-- 文字: E --*/
	0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x20,0x23,0x20,0x18,0x00,
	/*-- 文字: F --*/
	0x08,0xF8,0x88,0x88,0xE8,0x08,0x10,0x00,0x20,0x3F,0x20,0x00,0x03,0x00,0x00,0x00,
	/*-- 文字: G --*/
	0xC0,0x30,0x08,0x08,0x08,0x38,0x00,0x00,0x07,0x18,0x20,0x20,0x22,0x1E,0x02,0x00,
	/*-- 文字: H --*/
	0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x20,0x3F,0x21,0x01,0x01,0x21,0x3F,0x20,
	/*-- 文字: I --*/
	0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
	/*-- 文字: J --*/
	0x00,0x00,0x08,0x08,0xF8,0x08,0x08,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,0x00,
	/*-- 文字: K --*/
	0x08,0xF8,0x88,0xC0,0x28,0x18,0x08,0x00,0x20,0x3F,0x20,0x01,0x26,0x38,0x20,0x00,
	/*-- 文字: L --*/
	0x08,0xF8,0x08,0x00,0x00,0x00,0x00,0x00,0x20,0x3F,0x20,0x20,0x20,0x20,0x30,0x00,
	/*-- 文字: M --*/
	0x08,0xF8,0xF8,0x00,0xF8,0xF8,0x08,0x00,0x20,0x3F,0x00,0x3F,0x00,0x3F,0x20,0x00,
	/*-- 文字: N --*/
	0x08,0xF8,0x30,0xC0,0x00,0x08,0xF8,0x08,0x20,0x3F,0x20,0x00,0x07,0x18,0x3F,0x00,
	/*-- 文字: O --*/
	0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x10,0x20,0x20,0x20,0x10,0x0F,0x00,
	/*-- 文字: P --*/
	0x08,0xF8,0x08,0x08,0x08,0x08,0xF0,0x00,0x20,0x3F,0x21,0x01,0x01,0x01,0x00,0x00,
	/*-- 文字: Q --*/
	0xE0,0x10,0x08,0x08,0x08,0x10,0xE0,0x00,0x0F,0x18,0x24,0x24,0x38,0x50,0x4F,0x00,
	/*-- 文字: R --*/
	0x08,0xF8,0x88,0x88,0x88,0x88,0x70,0x00,0x20,0x3F,0x20,0x00,0x03,0x0C,0x30,0x20,
	/*-- 文字: S --*/
	0x00,0x70,0x88,0x08,0x08,0x08,0x38,0x00,0x00,0x38,0x20,0x21,0x21,0x22,0x1C,0x00,
	/*-- 文字: T --*/
	0x18,0x08,0x08,0xF8,0x08,0x08,0x18,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,
	/*-- 文字: U --*/
	0x08,0xF8,0x08,0x00,0x00,0x08,0xF8,0x08,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,
	/*-- 文字: V --*/
	0x08,0x78,0x88,0x00,0x00,0xC8,0x38,0x08,0x00,0x00,0x07,0x38,0x0E,0x01,0x00,0x00,
	/*-- 文字: W --*/
	0xF8,0x08,0x00,0xF8,0x00,0x08,0xF8,0x00,0x03,0x3C,0x07,0x00,0x07,0x3C,0x03,0x00,
	/*-- 文字: X --*/
	0x08,0x18,0x68,0x80,0x80,0x68,0x18,0x08,0x20,0x30,0x2C,0x03,0x03,0x2C,0x30,0x20,
	/*-- 文字: Y --*/
	0x08,0x38,0xC8,0x00,0xC8,0x38,0x08,0x00,0x00,0x00,0x20,0x3F,0x20,0x00,0x00,0x00,
	/*-- 文字: Z --*/
	0x10,0x08,0x08,0x08,0xC8,0x38,0x08,0x00,0x20,0x38,0x26,0x21,0x20,0x20,0x18,0x00,
	/*-- 文字: [ --*/
	0x00,0x00,0x00,0xFE,0x02,0x02,0x02,0x00,0x00,0x00,0x00,0x7F,0x40,0x40,0x40,0x00,
	/*-- 文字: \ --*/
	0x00,0x0C,0x30,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x06,0x38,0xC0,0x00,
	/*-- 文字: ] --*/
	0x00,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x40,0x40,0x40,0x7F,0x00,0x00,0x00,
	/*-- 文字: ^ --*/
	0x00,0x00,0x04,0x02,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*-- 文字: _ --*/
	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x80,
	/*-- 文字: ` --*/
	0x00,0x02,0x02,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
	/*-- 文字: a --*/
	0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x19,0x24,0x22,0x22,0x22,0x3F,0x20,
	/*-- 文字: b --*/
	0x08,0xF8,0x00,0x80,0x80,0x00,0x00,0x00,0x00,0x3F,0x11,0x20,0x20,0x11,0x0E,0x00,
	/*-- 文字: c --*/
	0x00,0x00,0x00,0x80,0x80,0x80,0x00,0x00,0x00,0x0E,0x11,0x20,0x20,0x20,0x11,0x00,
	/*-- 文字: d --*/
	0x00,0x00,0x00,0x80,0x80,0x88,0xF8,0x00,0x00,0x0E,0x11,0x20,0x20,0x10,0x3F,0x20,
	/*-- 文字: e --*/
	0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x22,0x22,0x22,0x22,0x13,0x00,
	/*-- 文字: f --*/
	0x00,0x80,0x80,0xF0,0x88,0x88,0x88,0x18,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
	/*-- 文字: g --*/
	0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x6B,0x94,0x94,0x94,0x93,0x60,0x00,
	/*-- 文字: h --*/
	0x08,0xF8,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,
	/*-- 文字: i --*/
	0x00,0x80,0x98,0x98,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
	/*-- 文字: j --*/
	0x00,0x00,0x00,0x80,0x98,0x98,0x00,0x00,0x00,0xC0,0x80,0x80,0x80,0x7F,0x00,0x00,
	/*-- 文字: k --*/
	0x08,0xF8,0x00,0x00,0x80,0x80,0x80,0x00,0x20,0x3F,0x24,0x02,0x2D,0x30,0x20,0x00,
	/*-- 文字: l --*/
	0x00,0x08,0x08,0xF8,0x00,0x00,0x00,0x00,0x00,0x20,0x20,0x3F,0x20,0x20,0x00,0x00,
	/*-- 文字: m --*/
	0x80,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x20,0x3F,0x20,0x00,0x3F,0x20,0x00,0x3F,
	/*-- 文字: n --*/
	0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x3F,0x21,0x00,0x00,0x20,0x3F,0x20,
	/*-- 文字: o --*/
	0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x00,0x1F,0x20,0x20,0x20,0x20,0x1F,0x00,
	/*-- 文字: p --*/
	0x80,0x80,0x00,0x80,0x80,0x00,0x00,0x00,0x80,0xFF,0xA1,0x20,0x20,0x11,0x0E,0x00,
	/*-- 文字: q --*/
	0x00,0x00,0x00,0x80,0x80,0x80,0x80,0x00,0x00,0x0E,0x11,0x20,0x20,0xA0,0xFF,0x80,
	/*-- 文字: r --*/
	0x80,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x20,0x20,0x3F,0x21,0x20,0x00,0x01,0x00,
	/*-- 文字: s --*/
	0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x33,0x24,0x24,0x24,0x24,0x19,0x00,
	/*-- 文字: t --*/
	0x00,0x80,0x80,0xE0,0x80,0x80,0x00,0x00,0x00,0x00,0x00,0x1F,0x20,0x20,0x00,0x00,
	/*-- 文字: u --*/
	0x80,0x80,0x00,0x00,0x00,0x80,0x80,0x00,0x00,0x1F,0x20,0x20,0x20,0x10,0x3F,0x20,
	/*-- 文字: v --*/
	0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x00,0x01,0x0E,0x30,0x08,0x06,0x01,0x00,
	/*-- 文字: w --*/
	0x80,0x80,0x00,0x80,0x00,0x80,0x80,0x80,0x0F,0x30,0x0C,0x03,0x0C,0x30,0x0F,0x00,
	/*-- 文字: x --*/
	0x00,0x80,0x80,0x00,0x80,0x80,0x80,0x00,0x00,0x20,0x31,0x2E,0x0E,0x31,0x20,0x00,
	/*-- 文字: y --*/
	0x80,0x80,0x80,0x00,0x00,0x80,0x80,0x80,0x80,0x81,0x8E,0x70,0x18,0x06,0x01,0x00,
	/*-- 文字: z --*/
	0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00,0x00,0x21,0x30,0x2C,0x22,0x21,0x30,0x00,
	/*-- 文字: { --*/
	0x00,0x00,0x00,0x00,0x80,0x7C,0x02,0x02,0x00,0x00,0x00,0x00,0x00,0x3F,0x40,0x40,
	/*-- 文字: | --*/
	0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,
	/*-- 文字: } --*/
	0x00,0x02,0x02,0x7C,0x80,0x00,0x00,0x00,0x00,0x40,0x40,0x3F,0x00,0x00,0x00,0x00,
	/*-- 文字: ~ --*/
	0x00,0x06,0x01,0x01,0x02,0x02,0x04,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
};

const u8 pointer[] = {
	0xFE,0xFC,0xF8,0xF0,0xE0,0xC0,0x80,0x00,
	0x7F,0x3F,0x1F,0x0F,0x07,0x03,0x01,0x00
};

static void LCD_cmd(u8 data)
{
	DS_CD = 0;
	SPI2_WriteByte(data);
}

static void LCD_data(u8 data)
{
	DS_CD = 1;
	SPI2_WriteByte(data);
}

static void LCD_address(u8 page, u8 column)
{
	//习惯上的第1页为内部的第0页所以减一
	page = page - 1;
	column = column - 1;
	
	LCD_cmd(0xB0+page); //64行按8行1个单位分成8个页
	LCD_cmd(((column>>4)&0x0F)+0x10); //设置列地址的高4位
	LCD_cmd(column&0x0F);             //设置列地址的低4位
}

void LCD_init(void)
{
	//------------------GPIO初始化-------------------
	
	GPIO_InitTypeDef GPIO_InitStructure;
	
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;	
	
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOC, ENABLE);	
	
	//LCD_BL_EN & DS_CD & DS_RST
	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_7 | GPIO_Pin_6;	
	GPIO_Init(GPIOC, &GPIO_InitStructure);
	
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);	
	
	//DS_CS
	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12;	
	GPIO_Init(GPIOB, &GPIO_InitStructure);
	
	//PB15 PB14 PB13
	SPI2_init();
		
	//------------------LCD初始化-------------------
	
	DS_CS = 0;  //片选选中LCD，低电平有效
	
	//复位LCD，低电平有效
	DS_RST = 0;
	delay_us(100);
	DS_RST = 1;
	delay_us(20);
	
	LCD_cmd(0xE2);  //软复位
	delay_us(5);
	LCD_cmd(0x2C);  //升压步骤1
	delay_us(5);
	LCD_cmd(0x2E);  //升压步骤2
	delay_us(5);
	LCD_cmd(0x2F);  //升压步骤3
	delay_us(5);
	LCD_cmd(0x23);  //粗调对比度，0x20-0x27
	LCD_cmd(0x81);  //微调对比度
	LCD_cmd(0x28);  //微调对比度的值，0x00-0x3F
	LCD_cmd(0xA2);  //1/9偏压比
	LCD_cmd(0xC8);  //行扫描顺序：从上到下
	LCD_cmd(0xA0);  //列扫描顺序：从左到右
	LCD_cmd(0x40);  //起始行：第一行开始
	LCD_cmd(0xAF);  //开显示
}

void LCD_Display_16x16(u8 row, u8 col, const u8 *buf)
{
	u8 i, j;
	u8 page, column;
		
	page = (row-1)*2;
	column = 1+(col-1)*8;
	
	for (i=0; i<2; i++)
	{
		for (j=0; j<16; j++)
		{
			lcd_buff[column+j][page+i] = *buf++;
		}
	}
}

void LCD_DisplayString(u8 row, u8 col, u8 *text)
{
	u16 i=0, j, k, n;
	u16 page, column;
		
	page = (row-1)*2;
	column = 1+(col-1)*8;
	
	while (text[i]>0x00)
	{
		if((text[i]>=0x20)&&(text[i]<=0x7E))
		{
			j = text[i]-0x20;
			
			for (n=0; n<2; n++)
			{
				for (k=0; k<8; k++)
				{
					lcd_buff[column+k][page+n] = ascii_table_8x16[j][k+8*n];
				}
			}
			
			i++;
			column += 8;
		}
		else i++;
	}
}

void LCD_Display_Num(u8 row, u8 col, u8 n)
{
	u8 i, j;
	u8 page, column;
		
	page = (row-1)*2;
	column = 1+(col-1)*8;
	
	for (i=0; i<2; i++)
	{
		for (j=0; j<8; j++)
		{
			lcd_buff[column+j][page+i] = ascii_table_8x16[16+n][j+8*i];
		}			
	}
}

void LCD_Clear_16x8(u8 row, u8 col)
{
	u8 i, j;
	u8 page, column;
		
	page = (row-1)*2;
	column = 1+(col-1)*8;
	
	for (i=0; i<2; i++)
	{
		for (j=0; j<8; j++)
		{
			lcd_buff[column+j][page+i] = 0x00;
		}			
	}
}

void LCD_Display_Pointer(u8 row, u8 col)
{
	u8 i, j;
	u8 page, column;
	
	page = (row-1)*2;
	column = 1+(col-1)*8;
	
	for (i=0; i<2; i++)
	{		
		for (j=0; j<8; j++)
		{
			lcd_buff[column+j][page+i] = pointer[j+8*i];
		}			
	}
}

void LCD_Clear_Pointer(u8 row, u8 col)
{
	u8 i, j;
	u8 page, column;
	
	page = (row-1)*2;
	column = 1+(col-1)*8;
	
	for (i=0; i<2; i++)
	{
		for (j=0; j<8; j++)
		{
			lcd_buff[column+j][page+i] = 0x00;
		}			
	}
}

void LCD_Clear(void)
{
	u8 i, j;
	
	for (i=0; i<8; i++)
	{
		for (j=0; j<128; j++)
		{
			lcd_buff[j][i] = 0x00;
		}
	}
}

void lcd_task(void *pdata)
{
	//u8 err; //用于读取UCOSII信号函数
	u8 i, j;
	
	GUI_init();
	
	//os_sem_lcd = OSSemCreate(0);
	
	while (1)
	{
		for (i=0; i<8; i++)
		{
			LCD_address(1+i, 1);
			
			for (j=0; j<128; j++)
			{
				LCD_data(lcd_buff[j][i]);
			}
		}
		
		//OSSemPend(os_sem_lcd, 0, &err);
		OSTimeDly(10/OS_TICK);
	}
}

